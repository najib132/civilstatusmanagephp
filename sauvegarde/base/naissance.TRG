TYPE=TRIGGERS
triggers='CREATE DEFINER=`root`@`localhost` TRIGGER `insert_naissance` BEFORE INSERT ON `naissance`\n FOR EACH ROW BEGIN\nDECLARE n_d1 INT; DECLARE t_d1 INT; \n\n\nIF NEW.deces_naissance=0 THEN\nSET @n_d1 :=(SELECT n_d from administration); \nUPDATE  `administration` SET `n_d` = 1+@n_d1;\nEND IF;\n\n\n\nIF NEW.deces_naissance=2 THEN\nSET @t_d1 :=(SELECT t_d from administration); \nUPDATE  `administration` SET `t_d` = 1+@t_d1;\nEND IF;\n\nEND' 'CREATE DEFINER=`root`@`localhost` TRIGGER `update_naissance` BEFORE UPDATE ON `naissance`\n FOR EACH ROW BEGIN\n\n\nDECLARE n_d1 INT; DECLARE n_hors_d1 INT; DECLARE t_d1 INT; DECLARE t_hors_d1 INT; DECLARE d_etrange1 INT;\n\n\nIF NEW.deces_naissance=0 AND OLD.deces_naissance=4 THEN\n\nSET @n_hors_d1 :=(SELECT n_hors_d from administration); \nSET @n_d1 :=(SELECT n_d from administration); \n\nUPDATE  `administration` SET `n_d` = 1+@n_d1, `n_hors_d`=-1+@n_hors_d1 ;\n\nEND IF;\n\n\nIF NEW.deces_naissance=4 AND OLD.deces_naissance=0 THEN\n\nSET @n_hors_d1 :=(SELECT n_hors_d from administration); \nSET @n_d1 :=(SELECT n_d from administration); \n\nUPDATE  `administration` SET `n_d` = -1+@n_d1, `n_hors_d`=1+@n_hors_d1 ;\n\nEND IF;\n\n\n\nIF NEW.deces_naissance=2 AND OLD.deces_naissance=3 THEN\n\nSET @t_hors_d1 :=(SELECT t_hors_d from administration); \nSET @t_d1 :=(SELECT t_d from administration); \n\nUPDATE  `administration` SET `t_d` = 1+@t_d1, `t_hors_d`=-1+@t_hors_d1 ;\n\nEND IF;\n\n\nIF NEW.deces_naissance=3 AND OLD.deces_naissance=2 THEN\n\nSET @t_hors_d1 :=(SELECT t_hors_d from administration); \nSET @t_d1 :=(SELECT t_d from administration); \n\nUPDATE  `administration` SET `t_d` = -1+@t_d1, `t_hors_d`=1+@t_hors_d1 ;\n\nEND IF;\n\n\nIF NEW.deces_naissance=2 AND OLD.deces_naissance=0 THEN\n\nSET @n_d1 :=(SELECT n_d from administration); \nSET @t_d1 :=(SELECT t_d from administration); \n\nUPDATE  `administration` SET `t_d` = 1+@t_d1, `n_d`=-1+@n_d1 ;\n\nEND IF;\n\n\n\nIF NEW.deces_naissance=3 AND OLD.deces_naissance=0 THEN\n\nSET @n_d1 :=(SELECT n_d from administration); \nSET @t_hors_d1 :=(SELECT t_hors_d from administration); \n\nUPDATE  `administration` SET `t_hors_d` = 1+@t_hors_d1, `n_d`=-1+@n_d1 ;\n\nEND IF;\n\n\nIF NEW.sex!=OLD.sex THEN\n\nUPDATE  `mention_p` SET `sex` = NEW.sex WHERE `annee_declaration`=OLD.annee_declaration AND `code`=OLD.code and `deces_naissance`=0 \n\nand `date` >= NEW.date_n ;\nEND IF;\n\n\nEND' 'CREATE DEFINER=`root`@`localhost` TRIGGER `del_naissance` BEFORE DELETE ON `naissance`\n FOR EACH ROW BEGIN\nDECLARE n_d1 INT; DECLARE n_hors_d1 INT; DECLARE t_d1 INT; DECLARE t_hors_d1 INT; DECLARE d_etrange1 INT;\n\n\nIF OLD.deces_naissance=0 THEN\nSET @n_d1 :=(SELECT n_d from administration); \nUPDATE  `administration` SET `n_d` = -1+@n_d1;\nEND IF;\n\nIF OLD.deces_naissance=4 THEN\nSET @n_hors_d1 :=(SELECT n_hors_d from administration); \nUPDATE  `administration` SET `n_hors_d` = -1+@n_hors_d1;\nEND IF;\n\n\nIF OLD.deces_naissance=2 THEN\nSET @t_d1 :=(SELECT t_d from administration); \nUPDATE  `administration` SET `t_d` = -1+@t_d1;\nEND IF;\n\nIF OLD.deces_naissance=3 THEN\nSET @t_hors_d1 :=(SELECT t_hors_d from administration); \nUPDATE  `administration` SET `t_hors_d` = -1+@t_hors_d1;\nEND IF;\n\n\nEND'
sql_modes=524288 524288 524288
definers='root@localhost' 'root@localhost' 'root@localhost'
client_cs_names='utf8' 'utf8' 'utf8'
connection_cl_names='utf8_general_ci' 'utf8_general_ci' 'utf8_general_ci'
db_cl_names='utf8_general_ci' 'utf8_general_ci' 'utf8_general_ci'
