TYPE=TRIGGERS
triggers='CREATE DEFINER=`root`@`localhost` TRIGGER `insert_deces` BEFORE INSERT ON `deces`\n FOR EACH ROW BEGIN\nDECLARE d_d1 INT; DECLARE d_hors_d1 INT;\n\n\nIF NEW.deces_naissance=1 THEN\nSET @d_d1 :=(SELECT d_d from administration); \nUPDATE  `administration` SET `d_d` = 1+@d_d1;\nEND IF;\n\nIF NEW.deces_naissance=5 THEN\nSET @d_hors_d1 :=(SELECT d_hors_d from administration); \nUPDATE  `administration` SET `d_hors_d` = 1+@d_hors_d1;\nEND IF;\n\n\nEND' 'CREATE DEFINER=`root`@`localhost` TRIGGER `update_deces` BEFORE UPDATE ON `deces`\n FOR EACH ROW BEGIN\n\n\nDECLARE d_d1 INT; DECLARE d_hors_d1 INT; \n\n\nIF NEW.deces_naissance=1 AND OLD.deces_naissance=5 THEN\n\nSET @d_hors_d1 :=(SELECT d_hors_d from administration); \nSET @d_d1 :=(SELECT d_d from administration); \n\nUPDATE  `administration` SET `d_d` = 1+@d_d1, `d_hors_d`=-1+@d_hors_d1 ;\n\nEND IF;\n\n\nIF NEW.deces_naissance=5 AND OLD.deces_naissance=1 THEN\n\nSET @d_hors_d1 :=(SELECT d_hors_d from administration); \nSET @d_d1 :=(SELECT d_d from administration); \n\nUPDATE  `administration` SET `d_d` = -1+@d_d1, `d_hors_d`=1+@d_hors_d1 ;\n\nEND IF;\n\n\n\nIF NEW.sex!=OLD.sex THEN\n\nUPDATE  `mention_p` SET `sex` = NEW.sex WHERE `annee_declaration`=OLD.annee_declaration AND `code`=OLD.code and `deces_naissance`=1 \n\nand `date` >= NEW.date_n;\nEND IF;\n\nEND' 'CREATE DEFINER=`root`@`localhost` TRIGGER `del_deces` BEFORE DELETE ON `deces`\n FOR EACH ROW BEGIN\nDECLARE d_d1 INT; DECLARE d_hors_d1 INT; \n\n\nIF OLD.deces_naissance=1 THEN\nSET @d_d1 :=(SELECT d_d from administration); \nUPDATE  `administration` SET `d_d` = -1+@d_d1;\nEND IF;\n\nIF OLD.deces_naissance=5 THEN\nSET @d_hors_d1 :=(SELECT d_hors_d from administration); \nUPDATE  `administration` SET `d_hors_d` = -1+@d_hors_d1;\nEND IF;\n\n\nEND'
sql_modes=0 0 0
definers='root@localhost' 'root@localhost' 'root@localhost'
client_cs_names='utf8' 'utf8' 'utf8'
connection_cl_names='utf8_general_ci' 'utf8_general_ci' 'utf8_general_ci'
db_cl_names='utf8_general_ci' 'utf8_general_ci' 'utf8_general_ci'
